{% extends "base.html" %}

{% block title %}{% if user %}Sửa người dùng{% else %}Thêm người dùng mới{% endif %}{% endblock %}

{% block content %}
<h2>{% if user %}Sửa người dùng: {{ user.name }}{% else %}Thêm người dùng mới{% endif %}</h2>
<form action="{% if user %}{{ url_for('user_edit', user_id=user.id) }}{% else %}{{ url_for('user_create') }}{% endif %}" method="post">
    <div class="form-group">
        <label for="name">Tên:</label>
        <input type="text" id="name" name="name" value="{{ user.name if user else '' }}" required>
    </div>
    <div class="form-group">
        <label for="phone">Số điện thoại:</label>
        <input type="text" id="phone" name="phone" value="{{ user.phone if user else '' }}" required>
    </div>
    <div class="form-group">
        <label for="username">Tên đăng nhập:</label>
        <input type="text" id="username" name="username" value="{{ user.username if user else '' }}" required>
    </div>
    <div class="form-group">
        <label for="password">Mật khẩu:</label>
        <input type="password" id="password" name="password" placeholder="Để trống nếu không muốn thay đổi" {% if not user %}required{% endif %}>
    </div>
    <div class="form-group">
        <label for="role">Quyền:</label>
        <select id="role" name="role" required>
            <option value="admin" {% if user and user.role == 'admin' %}selected{% endif %}>admin</option>
            <option value="user" {% if user and user.role == 'user' %}selected{% endif %}>user</option>
        </select>
    </div>
    <div class="form-group">
        <label for="dob">Ngày sinh:</label>
        <input type="date" id="dob" name="dob" value="{{ user.dob if user else '' }}">
    </div>
    <div class="form-group">
        <label for="job_description">Mô tả công việc:</label>
        <textarea id="job_description" name="job_description">{{ user.job_description if user else '' }}</textarea>
    </div>
    <button type="submit" class="button">Lưu</button>
    <a href="{{ url_for('user_list') }}" class="button">Hủy</a>
</form>
{% endblock %}